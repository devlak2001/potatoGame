"use strict";(self.webpackChunkpotato_peeler=self.webpackChunkpotato_peeler||[]).push([[678],{6558:function(e,t,n){n.r(t),n.d(t,{Head:function(){return o}});var r=n(7294),a=n(2091);function l(e,t){return Math.floor(Math.random()*(t-e+1)+e)}const c=e=>{let{number:t}=e;return r.createElement(r.Fragment,null,Array.from(t.toString()).map((e=>r.createElement("div",{className:"digits",style:{transform:"translateY(-"+e/10*100+"%)"}},r.createElement("div",null,r.createElement("span",null,"0")),r.createElement("div",null,r.createElement("span",null,"1")),r.createElement("div",null,r.createElement("span",null,"2")),r.createElement("div",null,r.createElement("span",null,"3")),r.createElement("div",null,r.createElement("span",null,"4")),r.createElement("div",null,r.createElement("span",null,"5")),r.createElement("div",null,r.createElement("span",null,"6")),r.createElement("div",null,r.createElement("span",null,"7")),r.createElement("div",null,r.createElement("span",null,"8")),r.createElement("div",null,r.createElement("span",null,"9"))))))};t.default=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useRef)(!1),{0:o,1:i}=(0,r.useState)(!1),s=(0,r.useRef)(void 0),u=(0,r.useRef)(0),{0:m,1:d}=(0,r.useState)("0000"),p=(0,r.useRef)(500),{0:f,1:g}=(0,r.useState)(p.current.toString());return(0,r.useEffect)((()=>{let r=Date.now(),a=1e4;document.addEventListener("gesturestart",(function(e){e.preventDefault()})),document.addEventListener("visibilitychange",(()=>{document.hidden&&!n.current&&(n.current=!0,s.current=Date.now(),i((e=>!0)))})),window.addEventListener("blur",(()=>{n.current||(n.current=!0,s.current=Date.now(),i((e=>!0)))}));const c=e.current.querySelectorAll(".peelers div"),o=e.current.querySelector(".peelers").offsetTop,m=e.current.querySelector(".peelers").clientHeight;function f(t){const n=document.createElement("div");n.dataset.elapsedTime=t.toString(),n.className="potatoRow",n.style.bottom=window.innerHeight+"px";const r=Math.random()<.5?1:2,a=[1,2,3];for(let e=0;e<r&&p.current>0;e++){const e=Math.floor(Math.random()*a.length),t=document.createElement("div");t.style.gridColumn=""+a[e],t.dataset.column=""+a[e],t.className="potato",n.append(t),p.current--,g(p.current.toString().padStart(3,"0")),a.splice(e,1)}e.current.prepend(n)}!function(e,t,r){const l=r/10,c=(t-e)/l;let o=0;const i=setInterval((()=>{n.current||(a+=c,o++,o>=l&&clearInterval(i))}),10)}(a,2500,3e4),e.current.addEventListener("touchstart",(function(n){n.preventDefault();const r=n.target;if(n.target.classList.contains("potato")&&r.getBoundingClientRect().top+r.clientHeight>o&&r.getBoundingClientRect().top<o+m){r.classList.add("clicked"),c[parseInt(r.dataset.column)-1].style.animation="none",console.log(r.clientHeight),c[parseInt(r.dataset.column)-1].style.animation="peeling 0.4s ease";const a=document.createElement("div");a.textContent="+10",a.className="scoreIncrementIndicator",e.current.append(a),a.style.top=n.changedTouches[0].clientY-a.clientHeight/2+"px",a.style.left=n.changedTouches[0].clientX-a.clientWidth/2+"px",setTimeout((()=>{const e=Math.random()<.5?1:-1;a.style.transform="translateY(-"+(100+l(0,50))+"%) scale("+(1+l(0,50)/100)+") rotate("+e*Math.floor(45*Math.random())+"deg)",a.style.opacity="0"}),0);const o=document.createElement("img");o.src="https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png",o.className="friesIncrementIndicator",e.current.append(o),function(e,t,n,r,a,c){const o=l(0,window.innerWidth),i=l(n,a),s=Date.now();function u(){const l=Date.now()-s,d=Math.min(l/c,1),p=m(t,o,r,d),f=m(n,i,a,d);e.style.top=f+"px",e.style.left=p+"px",d<1&&requestAnimationFrame(u)}function m(e,t,n,r){return Math.pow(1-r,2)*e+2*(1-r)*r*t+Math.pow(r,2)*n}u()}(o,n.changedTouches[0].clientX-a.clientWidth/2,n.changedTouches[0].clientY-a.clientHeight/2,t.current.getBoundingClientRect().left,t.current.getBoundingClientRect().top,1e3),o.onanimationend=t=>{"friesIncrementIndicatorPulse"===t.animationName&&(e.current.removeChild(o),e.current.removeChild(a))},o.onanimationstart=e=>{"friesIncrementIndicatorPulse"===e.animationName&&d((e=>(Number(e)+10).toString().padStart(4,"0")))}}})),f(0),requestAnimationFrame((function t(){if(!n.current){const t=Date.now()-r-u.current,n=e.current.querySelectorAll(".potatoRow");n[0].offsetTop>0&&f(t),n[n.length-1].offsetTop>window.innerHeight&&e.current.removeChild(n[n.length-1]),n.forEach((e=>{const n=(t-e.dataset.elapsedTime)/a;n<1&&(e.style.bottom=window.innerHeight-(window.innerHeight+window.innerWidth/3)*n+"px")}))}requestAnimationFrame(t)}))}),[d]),r.createElement(r.Fragment,null,r.createElement("div",{className:"minigame"},r.createElement("div",{className:"topBar"},r.createElement("div",{className:"score"},r.createElement("img",{ref:t,src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(c,{number:m}))),r.createElement("div",{className:"potatoesNumber"},r.createElement("img",{src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(c,{number:f}))),r.createElement("button",{className:"pauseButton",onClick:()=>{n.current=!0,s.current=Date.now(),i(!0)}},r.createElement(a.Wh,null))),r.createElement("div",{className:"potatoGame",ref:e},r.createElement("div",{className:"peelers"},r.createElement("div",null),r.createElement("div",null),r.createElement("div",null))),o&&r.createElement("div",{className:"pausePopup"},r.createElement("div",null,r.createElement("button",{onClick:()=>{n.current=!1,u.current+=Date.now()-s.current,i(!1)}},"CONTINUE")))))};const o=()=>r.createElement(r.Fragment,null,r.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("title",null,"Home Page"))},3621:function(e,t,n){n.d(t,{w_:function(){return p}});var r=n(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),c=["attr","size","title"];function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return e&&e.map(((e,t)=>r.createElement(e.tag,u({key:t},e.attr),d(e.child))))}function p(e){return t=>r.createElement(f,i({attr:u({},e.attr)},t),d(e.child))}function f(e){var t=t=>{var n,{attr:a,size:l,title:s}=e,m=o(e,c),d=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,m,{className:n,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==l?r.createElement(l.Consumer,null,(e=>t(e))):t(a)}}}]);
//# sourceMappingURL=component---src-pages-index-js-29a333af0da134b96c66.js.map