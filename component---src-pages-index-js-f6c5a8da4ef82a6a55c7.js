"use strict";(self.webpackChunkpotato_peeler=self.webpackChunkpotato_peeler||[]).push([[678],{1468:function(e,t,n){n.r(t),n.d(t,{Head:function(){return d},default:function(){return m}});var r=n(7294),a=n(2091),l=n(1054),o=n(1766);const c={potatoTapSound:new o.Howl({src:["https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potatoTap.mp3"],volume:0}),potatoCollectedSound:new o.Howl({src:["https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/collectedSound.mp3"],volume:0}),gameBackgroundSound:new o.Howl({src:["https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/gameBackground.mp3"],volume:0,loop:!0})};var i=c;function s(e,t){return Math.floor(Math.random()*(t-e+1)+e)}const u=e=>{let{number:t}=e;return r.createElement(r.Fragment,null,Array.from(t).map((e=>r.createElement("div",{className:"digits",style:{transform:"translateY(-"+e/10*100+"%)"}},r.createElement("div",null,r.createElement("span",null,"0")),r.createElement("div",null,r.createElement("span",null,"1")),r.createElement("div",null,r.createElement("span",null,"2")),r.createElement("div",null,r.createElement("span",null,"3")),r.createElement("div",null,r.createElement("span",null,"4")),r.createElement("div",null,r.createElement("span",null,"5")),r.createElement("div",null,r.createElement("span",null,"6")),r.createElement("div",null,r.createElement("span",null,"7")),r.createElement("div",null,r.createElement("span",null,"8")),r.createElement("div",null,r.createElement("span",null,"9"))))))};var m=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useRef)(!1),{0:o,1:m}=(0,r.useState)(!1),d=(0,r.useRef)(void 0),p=(0,r.useRef)(0),{0:f,1:g}=(0,r.useState)("0000"),v=(0,r.useRef)(500),{0:h,1:E}=(0,r.useState)(v.current.toString()),{0:w,1:y}=(0,r.useState)(!0);return(0,r.useEffect)((()=>{document.addEventListener("visibilitychange",(()=>{document.hidden?Object.keys(c).forEach((e=>{c[e].playing()&&c[e].pause()})):Object.keys(c).forEach((e=>{c[e].seek()&&!c[e].playing()&&c[e].play()}))})),window.addEventListener("blur",(()=>{Object.keys(c).forEach((e=>{c[e].playing()&&c[e].pause()}))})),window.addEventListener("focus",(()=>{Object.keys(c).forEach((e=>{c[e].seek()&&!c[e].playing()&&c[e].play()}))}))}),[]),(0,r.useEffect)((()=>{let r=Date.now(),a=1e4,l=e.current.querySelectorAll(".potatoRow");document.addEventListener("gesturestart",(function(e){e.preventDefault()})),document.addEventListener("visibilitychange",(()=>{document.hidden&&!n.current&&(n.current=!0,d.current=Date.now(),m((()=>!0)))})),window.addEventListener("blur",(()=>{n.current||(n.current=!0,d.current=Date.now(),m((()=>!0)))}));const o=e.current.querySelectorAll(".peelers div"),c=e.current.querySelector(".peelers").offsetTop,u=e.current.querySelector(".peelers").clientHeight;function f(t){const n=document.createElement("div");n.dataset.elapsedTime=t.toString(),n.className="potatoRow",n.style.bottom=window.innerHeight-.115*window.innerWidth-32+"px";const r=Math.random()<.5?1:2,a=[1,2,3];for(let e=0;e<r&&v.current>0;e++){const e=Math.floor(Math.random()*a.length),t=document.createElement("div");t.style.gridColumn=""+a[e],t.dataset.column=""+a[e],t.className="potato",n.append(t),v.current--,E(v.current.toString().padStart(3,"0")),a.splice(e,1)}e.current.prepend(n),l=e.current.querySelectorAll(".potatoRow")}!function(e,t,r){const l=r/10,o=(t-e)/l;let c=0;const i=setInterval((()=>{n.current||(a+=o,c++,c>=l&&clearInterval(i))}),10)}(a,2500,3e4),e.current.addEventListener("touchstart",(function(n){n.preventDefault();const r=n.target;if(n.target.classList.contains("potato")&&r.getBoundingClientRect().top+r.clientHeight>c&&r.getBoundingClientRect().top<c+u){i.potatoTapSound.play(),r.classList.add("clicked"),o[parseInt(r.dataset.column)-1].style.animation="none",console.log(r.clientHeight),o[parseInt(r.dataset.column)-1].style.animation="peeling 0.4s ease";const a=document.createElement("div");a.textContent="+10",a.className="scoreIncrementIndicator",e.current.append(a),a.style.top=n.changedTouches[0].clientY-a.clientHeight/2+"px",a.style.left=n.changedTouches[0].clientX-a.clientWidth/2+"px",setTimeout((()=>{const e=Math.random()<.5?1:-1;a.style.transform="translateY(-"+(100+s(0,50))+"%) scale("+(1+s(0,50)/100)+") rotate("+e*Math.floor(45*Math.random())+"deg)",a.style.opacity="0"}),0);const l=document.createElement("img");l.src="https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png",l.className="friesIncrementIndicator",e.current.append(l),function(e,t,n,r,a,l){const o=s(0,window.innerWidth),c=s(n,a),i=Date.now();function u(){const s=Date.now()-i,d=Math.min(s/l,1),p=m(t,o,r,d),f=m(n,c,a,d);e.style.top=f+"px",e.style.left=p+"px",d<1&&requestAnimationFrame(u)}function m(e,t,n,r){return Math.pow(1-r,2)*e+2*(1-r)*r*t+Math.pow(r,2)*n}u()}(l,n.changedTouches[0].clientX-a.clientWidth/2,n.changedTouches[0].clientY-a.clientHeight/2,t.current.getBoundingClientRect().left,t.current.getBoundingClientRect().top,1e3),l.onanimationend=t=>{"friesIncrementIndicatorPulse"===t.animationName&&(e.current.removeChild(l),e.current.removeChild(a))},l.onanimationstart=e=>{"friesIncrementIndicatorPulse"===e.animationName&&(i.potatoCollectedSound.play(),g((e=>(Number(e)+10).toString().padStart(4,"0"))))}}})),f(0),requestAnimationFrame((function t(){if(!n.current){const t=Date.now()-r-p.current;l.forEach((e=>{const n=(t-e.dataset.elapsedTime)/a;n<1&&(e.style.bottom=window.innerHeight-.115*window.innerWidth-32-(window.innerHeight+window.innerWidth/3)*n+"px")})),l[0].offsetTop>.115*window.innerWidth+32&&f(t),l[l.length-1].offsetTop>window.innerHeight&&e.current.removeChild(l[l.length-1])}requestAnimationFrame(t)}))}),[g]),r.createElement(r.Fragment,null,r.createElement("div",{className:"minigame"},r.createElement("div",{className:"topBar"},r.createElement("button",{className:"muteButton",onClick:()=>{w?(i.potatoTapSound.volume(1),i.gameBackgroundSound.volume(1),i.potatoCollectedSound.volume(1),i.gameBackgroundSound.playing()||i.gameBackgroundSound.play()):(i.potatoTapSound.volume(0),i.potatoCollectedSound.volume(0),i.gameBackgroundSound.playing()&&i.gameBackgroundSound.pause()),y(!w)}},w?r.createElement(l.KwC,null):r.createElement(l.oSh,null)),r.createElement("div",{className:"score"},r.createElement("img",{ref:t,src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(u,{number:f}))),r.createElement("div",{className:"potatoesNumber"},r.createElement("img",{src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(u,{number:h}))),r.createElement("button",{className:"pauseButton",onClick:()=>{n.current=!0,d.current=Date.now(),m(!0)}},r.createElement(a.Wh,null))),r.createElement("button",{className:"potatoGame",ref:e},r.createElement("div",{className:"peelers"},r.createElement("div",null),r.createElement("div",null),r.createElement("div",null))),o&&r.createElement("div",{className:"pausePopup"},r.createElement("div",null,r.createElement("button",{onClick:()=>{n.current=!1,p.current+=Date.now()-d.current,m(!1)}},"CONTINUE")))))};const d=()=>r.createElement(r.Fragment,null,r.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("link",{rel:"preload",as:"audio",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/himnaSrbije.mp3"}),r.createElement("title",null,"Home Page"))},3621:function(e,t,n){n.d(t,{w_:function(){return p}});var r=n(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),o=["attr","size","title"];function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return e&&e.map(((e,t)=>r.createElement(e.tag,u({key:t},e.attr),d(e.child))))}function p(e){return t=>r.createElement(f,i({attr:u({},e.attr)},t),d(e.child))}function f(e){var t=t=>{var n,{attr:a,size:l,title:s}=e,m=c(e,o),d=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,m,{className:n,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==l?r.createElement(l.Consumer,null,(e=>t(e))):t(a)}}}]);
//# sourceMappingURL=component---src-pages-index-js-f6c5a8da4ef82a6a55c7.js.map