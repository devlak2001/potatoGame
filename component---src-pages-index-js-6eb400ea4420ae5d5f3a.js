"use strict";(self.webpackChunkpotato_peeler=self.webpackChunkpotato_peeler||[]).push([[678],{6558:function(e,t,n){n.r(t),n.d(t,{Head:function(){return u}});var r=n(7294),a=n(2091),l=n(1054),o=n(3304);function c(e,t){return Math.floor(Math.random()*(t-e+1)+e)}const i=e=>{let{number:t}=e;return r.createElement(r.Fragment,null,Array.from(t).map((e=>r.createElement("div",{className:"digits",style:{transform:"translateY(-"+e/10*100+"%)"}},r.createElement("div",null,r.createElement("span",null,"0")),r.createElement("div",null,r.createElement("span",null,"1")),r.createElement("div",null,r.createElement("span",null,"2")),r.createElement("div",null,r.createElement("span",null,"3")),r.createElement("div",null,r.createElement("span",null,"4")),r.createElement("div",null,r.createElement("span",null,"5")),r.createElement("div",null,r.createElement("span",null,"6")),r.createElement("div",null,r.createElement("span",null,"7")),r.createElement("div",null,r.createElement("span",null,"8")),r.createElement("div",null,r.createElement("span",null,"9"))))))};t.default=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=(0,r.useRef)(!1),{0:u,1:s}=(0,r.useState)(!1),m=(0,r.useRef)(void 0),d=(0,r.useRef)(0),{0:p,1:f}=(0,r.useState)("0000"),g=(0,r.useRef)(500),{0:v,1:h}=(0,r.useState)(g.current.toString()),{0:E,1:w}=(0,r.useState)(!0);return(0,o.useSound)(),(0,r.useEffect)((()=>{let r=Date.now(),a=1e4,l=e.current.querySelectorAll(".potatoRow");document.addEventListener("gesturestart",(function(e){e.preventDefault()})),document.addEventListener("visibilitychange",(()=>{document.hidden&&!n.current&&(n.current=!0,m.current=Date.now(),s((()=>!0)))})),window.addEventListener("blur",(()=>{n.current||(n.current=!0,m.current=Date.now(),s((()=>!0)))}));const i=e.current.querySelectorAll(".peelers div"),u=e.current.querySelector(".peelers").offsetTop,p=e.current.querySelector(".peelers").clientHeight;function v(t){const n=document.createElement("div");n.dataset.elapsedTime=t.toString(),n.className="potatoRow",n.style.bottom=window.innerHeight-.115*window.innerWidth-32+"px";const r=Math.random()<.5?1:2,a=[1,2,3];for(let e=0;e<r&&g.current>0;e++){const e=Math.floor(Math.random()*a.length),t=document.createElement("div");t.style.gridColumn=""+a[e],t.dataset.column=""+a[e],t.className="potato",n.append(t),g.current--,h(g.current.toString().padStart(3,"0")),a.splice(e,1)}e.current.prepend(n),l=e.current.querySelectorAll(".potatoRow")}!function(e,t,r){const l=r/10,o=(t-e)/l;let c=0;const i=setInterval((()=>{n.current||(a+=o,c++,c>=l&&clearInterval(i))}),10)}(a,2500,3e4),e.current.addEventListener("touchstart",(function(n){n.preventDefault();const r=n.target;if(n.target.classList.contains("potato")&&r.getBoundingClientRect().top+r.clientHeight>u&&r.getBoundingClientRect().top<u+p){o.default.potatoTapSound.play(),r.classList.add("clicked"),i[parseInt(r.dataset.column)-1].style.animation="none",console.log(r.clientHeight),i[parseInt(r.dataset.column)-1].style.animation="peeling 0.4s ease";const a=document.createElement("div");a.textContent="+10",a.className="scoreIncrementIndicator",e.current.append(a),a.style.top=n.changedTouches[0].clientY-a.clientHeight/2+"px",a.style.left=n.changedTouches[0].clientX-a.clientWidth/2+"px",setTimeout((()=>{const e=Math.random()<.5?1:-1;a.style.transform="translateY(-"+(100+c(0,50))+"%) scale("+(1+c(0,50)/100)+") rotate("+e*Math.floor(45*Math.random())+"deg)",a.style.opacity="0"}),0);const l=document.createElement("img");l.src="https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png",l.className="friesIncrementIndicator",e.current.append(l),function(e,t,n,r,a,l){const o=c(0,window.innerWidth),i=c(n,a),u=Date.now();function s(){const c=Date.now()-u,d=Math.min(c/l,1),p=m(t,o,r,d),f=m(n,i,a,d);e.style.top=f+"px",e.style.left=p+"px",d<1&&requestAnimationFrame(s)}function m(e,t,n,r){return Math.pow(1-r,2)*e+2*(1-r)*r*t+Math.pow(r,2)*n}s()}(l,n.changedTouches[0].clientX-a.clientWidth/2,n.changedTouches[0].clientY-a.clientHeight/2,t.current.getBoundingClientRect().left,t.current.getBoundingClientRect().top,1e3),l.onanimationend=t=>{"friesIncrementIndicatorPulse"===t.animationName&&(e.current.removeChild(l),e.current.removeChild(a))},l.onanimationstart=e=>{"friesIncrementIndicatorPulse"===e.animationName&&(o.default.potatoCollectedSound.play(),f((e=>(Number(e)+10).toString().padStart(4,"0"))))}}})),v(0),requestAnimationFrame((function t(){if(!n.current){const t=Date.now()-r-d.current;l.forEach((e=>{const n=(t-e.dataset.elapsedTime)/a;n<1&&(e.style.bottom=window.innerHeight-.115*window.innerWidth-32-(window.innerHeight+window.innerWidth/3)*n+"px")})),l[0].offsetTop>.115*window.innerWidth+32&&v(t),l[l.length-1].offsetTop>window.innerHeight&&e.current.removeChild(l[l.length-1])}requestAnimationFrame(t)}))}),[f]),r.createElement(r.Fragment,null,r.createElement("div",{className:"minigame"},r.createElement("div",{className:"topBar"},r.createElement("button",{className:"muteButton",onClick:()=>{E?(o.default.potatoTapSound.volume(1),o.default.gameBackgroundSound.volume(1),o.default.potatoCollectedSound.volume(1),o.default.gameBackgroundSound.playing()||o.default.gameBackgroundSound.play()):(o.default.potatoTapSound.volume(0),o.default.potatoCollectedSound.volume(0),o.default.gameBackgroundSound.playing()&&o.default.gameBackgroundSound.pause()),w(!E)}},E?r.createElement(l.KwC,null):r.createElement(l.oSh,null)),r.createElement("div",{className:"score"},r.createElement("img",{ref:t,src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(i,{number:p}))),r.createElement("div",{className:"potatoesNumber"},r.createElement("img",{src:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("div",{className:"digitsWrapper"},r.createElement(i,{number:v}))),r.createElement("button",{className:"pauseButton",onClick:()=>{n.current=!0,m.current=Date.now(),s(!0)}},r.createElement(a.Wh,null))),r.createElement("button",{className:"potatoGame",ref:e},r.createElement("div",{className:"peelers"},r.createElement("div",null),r.createElement("div",null),r.createElement("div",null))),u&&r.createElement("div",{className:"pausePopup"},r.createElement("div",null,r.createElement("button",{onClick:()=>{n.current=!1,d.current+=Date.now()-m.current,s(!1)}},"CONTINUE")))))};const u=()=>r.createElement(r.Fragment,null,r.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png"}),r.createElement("link",{rel:"preload",as:"image",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png"}),r.createElement("link",{rel:"preload",as:"audio",href:"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/himnaSrbije.mp3"}),r.createElement("title",null,"Home Page"))},3621:function(e,t,n){n.d(t,{w_:function(){return p}});var r=n(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),o=["attr","size","title"];function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return e&&e.map(((e,t)=>r.createElement(e.tag,s({key:t},e.attr),d(e.child))))}function p(e){return t=>r.createElement(f,i({attr:s({},e.attr)},t),d(e.child))}function f(e){var t=t=>{var n,{attr:a,size:l,title:u}=e,m=c(e,o),d=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,m,{className:n,style:s(s({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),u&&r.createElement("title",null,u),e.children)};return void 0!==l?r.createElement(l.Consumer,null,(e=>t(e))):t(a)}}}]);
//# sourceMappingURL=component---src-pages-index-js-6eb400ea4420ae5d5f3a.js.map