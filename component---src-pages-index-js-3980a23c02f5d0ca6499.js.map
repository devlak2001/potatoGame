{"version":3,"file":"component---src-pages-index-js-3980a23c02f5d0ca6499.js","mappings":"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","sources":["webpack://potato-peeler/./src/pages/index.js"],"sourcesContent":["import React, { createElement, useEffect, useRef, useState } from \"react\";\r\n\r\nimport \"./../styles/index.scss\";\r\n\r\nconst IndexPage = () => {\r\n  const gameWrapper = useRef(null);\r\n  const [score, setScore] = useState(\"0000\");\r\n\r\n  useEffect(() => {\r\n    let start;\r\n    let maxPotatoes = 500;\r\n    const peelers = gameWrapper.current.querySelectorAll(\".peelers div\");\r\n    console.log(peelers[0]);\r\n    const peelersOffsetTop =\r\n      gameWrapper.current.querySelector(\".peelers\").offsetTop;\r\n    const peelersHeight =\r\n      gameWrapper.current.querySelector(\".peelers\").clientHeight;\r\n    let speed = 0.1;\r\n\r\n    document.addEventListener(\"gesturestart\", function (e) {\r\n      e.preventDefault();\r\n    });\r\n\r\n    function generatePotatoes(elapsedTime) {\r\n      const potatoRow = document.createElement(\"div\");\r\n      potatoRow.dataset.elapsedTime = elapsedTime.toString();\r\n      potatoRow.className = \"potatoRow\";\r\n      potatoRow.style.bottom = `${window.innerHeight}px`;\r\n\r\n      const numPotatoes = Math.random() < 0.5 ? 1 : 2;\r\n      const columns = [1, 2, 3];\r\n      for (let i = 0; i < numPotatoes && maxPotatoes > 0; i++) {\r\n        const randomIndex = Math.floor(Math.random() * columns.length);\r\n\r\n        const potato = document.createElement(\"img\");\r\n        potato.src =\r\n          \"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png\";\r\n        potato.style.gridColumn = `${columns[randomIndex]}`;\r\n        potato.dataset.peelable = \"false\";\r\n        potato.dataset.column = `${columns[randomIndex]}`;\r\n        potato.ontouchstart = potatoOnTouchStart;\r\n        potatoRow.append(potato);\r\n\r\n        maxPotatoes--;\r\n\r\n        columns.splice(randomIndex, 1);\r\n      }\r\n      gameWrapper.current.append(potatoRow);\r\n    }\r\n\r\n    function potatoOnTouchStart(e) {\r\n      const currentTarget = e.currentTarget;\r\n      if (\r\n        currentTarget.getBoundingClientRect().top + currentTarget.clientHeight >\r\n          peelersOffsetTop &&\r\n        currentTarget.getBoundingClientRect().top <\r\n          peelersOffsetTop + peelersHeight\r\n      ) {\r\n        currentTarget.classList.add(\"clicked\");\r\n        setScore((score) => (Number(score) + 10).toString().padStart(4, \"0\"));\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"none\";\r\n        console.log(currentTarget.clientHeight);\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"peeling 0.4s ease\";\r\n      }\r\n    }\r\n\r\n    function step(timeStamp) {\r\n      if (start === undefined) {\r\n        start = timeStamp;\r\n      }\r\n      const elapsed = timeStamp - start;\r\n      const potatoRows = gameWrapper.current.querySelectorAll(\".potatoRow\");\r\n\r\n      if (potatoRows[potatoRows.length - 1].offsetTop > 0) {\r\n        generatePotatoes(elapsed);\r\n      }\r\n\r\n      if (speed < 0.3) {\r\n        speed = 0.1 + elapsed / 100000;\r\n      }\r\n\r\n      if (potatoRows[0].offsetTop > window.innerHeight) {\r\n        gameWrapper.current.removeChild(potatoRows[0]);\r\n      }\r\n\r\n      potatoRows.forEach((el) => {\r\n        el.style.bottom = `${\r\n          window.innerHeight - (elapsed - el.dataset.elapsedTime) * speed\r\n        }px`;\r\n      });\r\n\r\n      requestAnimationFrame(step);\r\n    }\r\n\r\n    generatePotatoes(0);\r\n    requestAnimationFrame(step);\r\n  }, [setScore]);\r\n\r\n  return (\r\n    <div className=\"potatoGame\" ref={gameWrapper}>\r\n      <div className=\"score\">\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[0])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[1])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[2])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[3])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"peelers\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IndexPage;\r\n\r\nexport const Head = () => (\r\n  <>\r\n    <meta\r\n      name=\"viewport\"\r\n      content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"\r\n    />\r\n    <title>Home Page</title>\r\n  </>\r\n);\r\n"],"names":["gameWrapper","useRef","score","setScore","useState","useEffect","start","maxPotatoes","peelers","current","querySelectorAll","console","log","peelersOffsetTop","querySelector","offsetTop","peelersHeight","clientHeight","speed","generatePotatoes","elapsedTime","potatoRow","document","createElement","dataset","toString","className","style","bottom","window","innerHeight","numPotatoes","Math","random","columns","i","randomIndex","floor","length","potato","src","gridColumn","peelable","column","ontouchstart","potatoOnTouchStart","append","splice","e","currentTarget","getBoundingClientRect","top","classList","add","Number","padStart","parseInt","animation","addEventListener","preventDefault","requestAnimationFrame","step","timeStamp","undefined","elapsed","potatoRows","removeChild","forEach","el","ref","transform","Head","name","content"],"sourceRoot":""}