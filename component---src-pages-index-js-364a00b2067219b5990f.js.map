{"version":3,"file":"component---src-pages-index-js-364a00b2067219b5990f.js","mappings":"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D,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE8B,UAAU,SACVC,MAAO,CACLsC,UAAU,oBAAqBd,OAAOvD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE8B,UAAU,SACVC,MAAO,CACLsC,UAAU,oBAAqBd,OAAOvD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE8B,UAAU,SACVC,MAAO,CACLsC,UAAU,oBAAqBd,OAAOvD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,QAIZ,uBAAK8B,UAAU,WACb,4BACA,4BACA,6BAEE,EAMH,MAAMqD,EAAO,IAClB,gCACE,wBACEC,KAAK,WACLC,QAAQ,+EAEV,6BAAO,a","sources":["webpack://potato-peeler/./src/pages/index.js"],"sourcesContent":["import React, { createElement, useEffect, useRef, useState } from \"react\";\r\n\r\nimport \"./../styles/index.scss\";\r\n\r\nconst IndexPage = () => {\r\n  const gameWrapper = useRef(null);\r\n  const [score, setScore] = useState(\"0000\");\r\n\r\n  useEffect(() => {\r\n    let start;\r\n    let maxPotatoes = 500;\r\n    const peelers = gameWrapper.current.querySelectorAll(\".peelers div\");\r\n    console.log(peelers[0]);\r\n    const peelersOffsetTop =\r\n      gameWrapper.current.querySelector(\".peelers\").offsetTop;\r\n    const peelersHeight =\r\n      gameWrapper.current.querySelector(\".peelers\").clientHeight;\r\n    let speed = 0.1;\r\n\r\n    document.addEventListener(\"gesturestart\", function (e) {\r\n      e.preventDefault();\r\n    });\r\n\r\n    function randomIntFromInterval(min, max) {\r\n      // min and max included\r\n      return Math.floor(Math.random() * (max - min + 1) + min);\r\n    }\r\n\r\n    function generatePotatoes(elapsedTime) {\r\n      const potatoRow = document.createElement(\"div\");\r\n      potatoRow.dataset.elapsedTime = elapsedTime.toString();\r\n      potatoRow.className = \"potatoRow\";\r\n      potatoRow.style.bottom = `${window.innerHeight}px`;\r\n\r\n      const numPotatoes = Math.random() < 0.5 ? 1 : 2;\r\n      const columns = [1, 2, 3];\r\n      for (let i = 0; i < numPotatoes && maxPotatoes > 0; i++) {\r\n        const randomIndex = Math.floor(Math.random() * columns.length);\r\n\r\n        const potato = document.createElement(\"img\");\r\n        potato.src =\r\n          \"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png\";\r\n        potato.style.gridColumn = `${columns[randomIndex]}`;\r\n        potato.dataset.peelable = \"false\";\r\n        potato.dataset.column = `${columns[randomIndex]}`;\r\n        potato.ontouchstart = potatoOnTouchStart;\r\n        potatoRow.append(potato);\r\n\r\n        maxPotatoes--;\r\n\r\n        columns.splice(randomIndex, 1);\r\n      }\r\n      gameWrapper.current.append(potatoRow);\r\n    }\r\n\r\n    function potatoOnTouchStart(e) {\r\n      const currentTarget = e.currentTarget;\r\n      if (\r\n        currentTarget.getBoundingClientRect().top + currentTarget.clientHeight >\r\n          peelersOffsetTop &&\r\n        currentTarget.getBoundingClientRect().top <\r\n          peelersOffsetTop + peelersHeight\r\n      ) {\r\n        currentTarget.classList.add(\"clicked\");\r\n        setScore((score) => (Number(score) + 10).toString().padStart(4, \"0\"));\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"none\";\r\n        console.log(currentTarget.clientHeight);\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"peeling 0.4s ease\";\r\n\r\n        for (const touch of e.touches) {\r\n          console.log(touch);\r\n          const scoreIncrementIndicator = document.createElement(\"div\");\r\n          scoreIncrementIndicator.textContent = \"+10\";\r\n          scoreIncrementIndicator.className = \"scoreIncrementIndicator\";\r\n          gameWrapper.current.append(scoreIncrementIndicator);\r\n          scoreIncrementIndicator.style.top = `${\r\n            touch.clientY - scoreIncrementIndicator.clientHeight / 2\r\n          }px`;\r\n          scoreIncrementIndicator.style.left = `${\r\n            touch.clientX - scoreIncrementIndicator.clientWidth / 2\r\n          }px`;\r\n          setTimeout(() => {\r\n            const clockwise = Math.random() < 0.5 ? 1 : -1;\r\n            scoreIncrementIndicator.style.transform = `translateY(-${\r\n              100 + randomIntFromInterval(0, 50)\r\n            }%) scale(${1 + randomIntFromInterval(0, 50) / 100}) rotate(${\r\n              clockwise * Math.floor(Math.random() * 45)\r\n            }deg)`;\r\n            scoreIncrementIndicator.style.opacity = \"0\";\r\n          }, 0);\r\n        }\r\n      }\r\n    }\r\n\r\n    function step(timeStamp) {\r\n      if (start === undefined) {\r\n        start = timeStamp;\r\n      }\r\n      const elapsed = timeStamp - start;\r\n      const potatoRows = gameWrapper.current.querySelectorAll(\".potatoRow\");\r\n\r\n      if (potatoRows[potatoRows.length - 1].offsetTop > 0) {\r\n        generatePotatoes(elapsed);\r\n      }\r\n\r\n      if (speed < 0.3) {\r\n        speed = 0.1 + elapsed / 100000;\r\n      }\r\n\r\n      if (potatoRows[0].offsetTop > window.innerHeight) {\r\n        gameWrapper.current.removeChild(potatoRows[0]);\r\n      }\r\n\r\n      potatoRows.forEach((el) => {\r\n        el.style.bottom = `${\r\n          window.innerHeight - (elapsed - el.dataset.elapsedTime) * speed\r\n        }px`;\r\n      });\r\n\r\n      requestAnimationFrame(step);\r\n    }\r\n\r\n    generatePotatoes(0);\r\n    requestAnimationFrame(step);\r\n  }, [setScore]);\r\n\r\n  return (\r\n    <div className=\"potatoGame\" ref={gameWrapper}>\r\n      <div className=\"score\">\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[0])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[1])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[2])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"digits\"\r\n          style={{\r\n            transform: `translateY(calc(-${Number(score[3])} * 11.4vw))`,\r\n          }}\r\n        >\r\n          <div>\r\n            <span>0</span>\r\n          </div>\r\n          <div>\r\n            <span>1</span>\r\n          </div>\r\n          <div>\r\n            <span>2</span>\r\n          </div>\r\n          <div>\r\n            <span>3</span>\r\n          </div>\r\n          <div>\r\n            <span>4</span>\r\n          </div>\r\n          <div>\r\n            <span>5</span>\r\n          </div>\r\n          <div>\r\n            <span>6</span>\r\n          </div>\r\n          <div>\r\n            <span>7</span>\r\n          </div>\r\n          <div>\r\n            <span>8</span>\r\n          </div>\r\n          <div>\r\n            <span>9</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"peelers\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IndexPage;\r\n\r\nexport const Head = () => (\r\n  <>\r\n    <meta\r\n      name=\"viewport\"\r\n      content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"\r\n    />\r\n    <title>Home Page</title>\r\n  </>\r\n);\r\n"],"names":["gameWrapper","useRef","score","setScore","useState","useEffect","start","maxPotatoes","peelers","current","querySelectorAll","console","log","peelersOffsetTop","querySelector","offsetTop","peelersHeight","clientHeight","speed","randomIntFromInterval","min","max","Math","floor","random","generatePotatoes","elapsedTime","potatoRow","document","createElement","dataset","toString","className","style","bottom","window","innerHeight","numPotatoes","columns","i","randomIndex","length","potato","src","gridColumn","peelable","column","ontouchstart","potatoOnTouchStart","append","splice","e","currentTarget","getBoundingClientRect","top","classList","add","Number","padStart","parseInt","animation","touch","touches","scoreIncrementIndicator","textContent","clientY","left","clientX","clientWidth","setTimeout","clockwise","transform","opacity","addEventListener","preventDefault","requestAnimationFrame","step","timeStamp","undefined","elapsed","potatoRows","removeChild","forEach","el","ref","Head","name","content"],"sourceRoot":""}