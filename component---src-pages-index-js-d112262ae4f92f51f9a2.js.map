{"version":3,"file":"component---src-pages-index-js-d112262ae4f92f51f9a2.js","mappings":"2KAiWA,UA7VkB,KAChB,MAAMA,GAAcC,EAAAA,EAAAA,QAAO,OACrB,EAACC,EAAM,EAACC,IAAYC,EAAAA,EAAAA,UAAS,QAuLnC,OArLAC,EAAAA,EAAAA,YAAU,KACR,IAAIC,EACAC,EAAc,IAClB,MAAMC,EAAiBR,EAAYS,QAAQC,cAAc,cACnDC,EAAUX,EAAYS,QAAQG,iBAAiB,gBACrDC,QAAQC,IAAIH,EAAQ,IACpB,MAAMI,EACJf,EAAYS,QAAQC,cAAc,YAAYM,UAC1CC,EACJjB,EAAYS,QAAQC,cAAc,YAAYQ,aAChD,IAAIC,EAAQ,GAMZ,SAASC,EAAsBC,EAAKC,GAElC,OAAOC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,EACtD,CAEA,SAASK,EAAiBC,GACxB,MAAMC,EAAYC,SAASC,cAAc,OACzCF,EAAUG,QAAQJ,YAAcA,EAAYK,WAC5CJ,EAAUK,UAAY,YACtBL,EAAUM,MAAMC,OAAYC,OAAOC,YAAW,KAE9C,MAAMC,EAAcf,KAAKE,SAAW,GAAM,EAAI,EACxCc,EAAU,CAAC,EAAG,EAAG,GACvB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,GAAe/B,EAAc,EAAGiC,IAAK,CACvD,MAAMC,EAAclB,KAAKC,MAAMD,KAAKE,SAAWc,EAAQG,QAEjDC,EAASd,SAASC,cAAc,OACtCa,EAAOC,IACL,2EACFD,EAAOT,MAAMW,WAAU,GAAMN,EAAQE,GACrCE,EAAOZ,QAAQe,SAAW,QAC1BH,EAAOZ,QAAQgB,OAAM,GAAMR,EAAQE,GACnCE,EAAOK,aAAeC,EACtBrB,EAAUsB,OAAOP,GAEjBpC,IAEAgC,EAAQY,OAAOV,EAAa,EAC9B,CACAzC,EAAYS,QAAQyC,OAAOtB,EAC7B,CAEA,SAASqB,EAAmBG,GAC1B,MAAMC,EAAgBD,EAAEC,cACxB,GACEA,EAAcC,wBAAwBC,IAAMF,EAAcnC,aACxDH,GACFsC,EAAcC,wBAAwBC,IACpCxC,EAAmBE,EACrB,CACAoC,EAAcG,UAAUC,IAAI,WAC5BtD,GAAUD,IAAWwD,OAAOxD,GAAS,IAAI8B,WAAW2B,SAAS,EAAG,OAChEhD,EAAQiD,SAASP,EAActB,QAAQgB,QAAU,GAAGb,MAAM2B,UACxD,OACFhD,QAAQC,IAAIuC,EAAcnC,cAC1BP,EAAQiD,SAASP,EAActB,QAAQgB,QAAU,GAAGb,MAAM2B,UACxD,oBAEF,MAAMC,EAA0BjC,SAASC,cAAc,OACvDgC,EAAwBC,YAAc,MACtCD,EAAwB7B,UAAY,0BACpCjC,EAAYS,QAAQyC,OAAOY,GAC3BA,EAAwB5B,MAAMqB,IAC5BH,EAAEY,eAAe,GAAGC,QAAUH,EAAwB5C,aAAe,EAAC,KAExE4C,EAAwB5B,MAAMgC,KAC5Bd,EAAEY,eAAe,GAAGG,QAAUL,EAAwBM,YAAc,EAAC,KAEvEC,YAAW,KACT,MAAMC,EAAY/C,KAAKE,SAAW,GAAM,GAAK,EAC7CqC,EAAwB5B,MAAMqC,UAAS,gBACrC,IAAMnD,EAAsB,EAAG,KAAG,aACxB,EAAIA,EAAsB,EAAG,IAAM,KAAG,YAChDkD,EAAY/C,KAAKC,MAAsB,GAAhBD,KAAKE,UAAc,OAE5CqC,EAAwB5B,MAAMsC,QAAU,GAAG,GAC1C,GAEH,MAAMC,EAA0B5C,SAASC,cAAc,OACvD2C,EAAwB7B,IACtB,0EACF6B,EAAwBxC,UAAY,0BACpCjC,EAAYS,QAAQyC,OAAOuB,GAqB/B,SACEC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAW5D,EAAsB,EAAGgB,OAAO6C,YAC3CC,EAAW9D,EAAsBwD,EAAQE,GAEzCK,EAAYC,KAAKC,MAEvB,SAASC,IACP,MACM3D,EADcyD,KAAKC,MACSF,EAC5BI,EAAWhE,KAAKF,IAAIM,EAAcoD,EAAU,GAE5CS,EAAWC,EAAgBd,EAAQK,EAAUH,EAAMU,GACnDG,EAAWD,EAAgBb,EAAQM,EAAUJ,EAAMS,GAEzDb,EAAQxC,MAAMqB,IAAMmC,EAAW,KAC/BhB,EAAQxC,MAAMgC,KAAOsB,EAAW,KAE5BD,EAAW,GACbI,sBAAsBL,EAE1B,CAEA,SAASG,EAAgBnF,EAAOsF,EAASC,EAAKC,GAC5C,OACEvE,KAAKwE,IAAI,EAAID,EAAG,GAAKxF,EACrB,GAAK,EAAIwF,GAAKA,EAAIF,EAClBrE,KAAKwE,IAAID,EAAG,GAAKD,CAErB,CAEAP,GACF,CAzDIU,CACEvB,EACArB,EAAEY,eAAe,GAAGG,QAAUL,EAAwBM,YAAc,EACpEhB,EAAEY,eAAe,GAAGC,QAClBH,EAAwB5C,aAAe,EACzCV,EAAe8C,wBAAwBY,KACvC1D,EAAe8C,wBAAwBC,IACvC,KAGFkB,EAAwBwB,eAAkB7C,IAChB,iCAApBA,EAAE8C,gBACJlG,EAAYS,QAAQ0F,YAAY1B,GAChCzE,EAAYS,QAAQ0F,YAAYrC,GAClC,CAEJ,CACF,CA/FAjC,SAASuE,iBAAiB,gBAAgB,SAAUhD,GAClDA,EAAEiD,gBACJ,IAmKA3E,EAAiB,GACjBiE,uBA7BA,SAASW,EAAKC,QACEC,IAAVlG,IACFA,EAAQiG,GAEV,MAAME,EAAUF,EAAYjG,EACtBoG,EAAa1G,EAAYS,QAAQG,iBAAiB,cAEpD8F,EAAWA,EAAWhE,OAAS,GAAG1B,UAAY,GAChDU,EAAiB+E,GAGftF,EAAQ,KACVA,EAAQ,GAAMsF,EAAU,KAGtBC,EAAW,GAAG1F,UAAYoB,OAAOC,aACnCrC,EAAYS,QAAQ0F,YAAYO,EAAW,IAG7CA,EAAWC,SAASC,IAClBA,EAAG1E,MAAMC,OACPC,OAAOC,aAAeoE,EAAUG,EAAG7E,QAAQJ,aAAeR,EAAK,IAC7D,IAGNwE,sBAAsBW,EACxB,GAG2B,GAC1B,CAACnG,IAGF,uBAAK8B,UAAU,aAAa4E,IAAK7G,GAC/B,uBAAKiC,UAAU,SACb,uBAAKW,IAAI,4EACT,uBAAKX,UAAU,iBACb,uBACEA,UAAU,SACVC,MAAO,CACLqC,UAAU,oBAAqBb,OAAOxD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE+B,UAAU,SACVC,MAAO,CACLqC,UAAU,oBAAqBb,OAAOxD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE+B,UAAU,SACVC,MAAO,CACLqC,UAAU,oBAAqBb,OAAOxD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,OAGV,uBACE+B,UAAU,SACVC,MAAO,CACLqC,UAAU,oBAAqBb,OAAOxD,EAAM,IAAG,gBAGjD,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,MAER,2BACE,4BAAM,SAKd,uBAAK+B,UAAU,WACb,4BACA,4BACA,6BAEE,EAMH,MAAM6E,EAAO,IAClB,gCACE,wBACEC,KAAK,WACLC,QAAQ,+EAEV,6BAAO,a","sources":["webpack://potato-peeler/./src/pages/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nimport \"./../styles/index.scss\";\r\n\r\nconst IndexPage = () => {\r\n  const gameWrapper = useRef(null);\r\n  const [score, setScore] = useState(\"0000\");\r\n\r\n  useEffect(() => {\r\n    let start;\r\n    let maxPotatoes = 500;\r\n    const staticFriesImg = gameWrapper.current.querySelector(\".score img\");\r\n    const peelers = gameWrapper.current.querySelectorAll(\".peelers div\");\r\n    console.log(peelers[0]);\r\n    const peelersOffsetTop =\r\n      gameWrapper.current.querySelector(\".peelers\").offsetTop;\r\n    const peelersHeight =\r\n      gameWrapper.current.querySelector(\".peelers\").clientHeight;\r\n    let speed = 0.1;\r\n\r\n    document.addEventListener(\"gesturestart\", function (e) {\r\n      e.preventDefault();\r\n    });\r\n\r\n    function randomIntFromInterval(min, max) {\r\n      // min and max included\r\n      return Math.floor(Math.random() * (max - min + 1) + min);\r\n    }\r\n\r\n    function generatePotatoes(elapsedTime) {\r\n      const potatoRow = document.createElement(\"div\");\r\n      potatoRow.dataset.elapsedTime = elapsedTime.toString();\r\n      potatoRow.className = \"potatoRow\";\r\n      potatoRow.style.bottom = `${window.innerHeight}px`;\r\n\r\n      const numPotatoes = Math.random() < 0.5 ? 1 : 2;\r\n      const columns = [1, 2, 3];\r\n      for (let i = 0; i < numPotatoes && maxPotatoes > 0; i++) {\r\n        const randomIndex = Math.floor(Math.random() * columns.length);\r\n\r\n        const potato = document.createElement(\"img\");\r\n        potato.src =\r\n          \"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/potato.png\";\r\n        potato.style.gridColumn = `${columns[randomIndex]}`;\r\n        potato.dataset.peelable = \"false\";\r\n        potato.dataset.column = `${columns[randomIndex]}`;\r\n        potato.ontouchstart = potatoOnTouchStart;\r\n        potatoRow.append(potato);\r\n\r\n        maxPotatoes--;\r\n\r\n        columns.splice(randomIndex, 1);\r\n      }\r\n      gameWrapper.current.append(potatoRow);\r\n    }\r\n\r\n    function potatoOnTouchStart(e) {\r\n      const currentTarget = e.currentTarget;\r\n      if (\r\n        currentTarget.getBoundingClientRect().top + currentTarget.clientHeight >\r\n          peelersOffsetTop &&\r\n        currentTarget.getBoundingClientRect().top <\r\n          peelersOffsetTop + peelersHeight\r\n      ) {\r\n        currentTarget.classList.add(\"clicked\");\r\n        setScore((score) => (Number(score) + 10).toString().padStart(4, \"0\"));\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"none\";\r\n        console.log(currentTarget.clientHeight);\r\n        peelers[parseInt(currentTarget.dataset.column) - 1].style.animation =\r\n          \"peeling 0.4s ease\";\r\n\r\n        const scoreIncrementIndicator = document.createElement(\"div\");\r\n        scoreIncrementIndicator.textContent = \"+10\";\r\n        scoreIncrementIndicator.className = \"scoreIncrementIndicator\";\r\n        gameWrapper.current.append(scoreIncrementIndicator);\r\n        scoreIncrementIndicator.style.top = `${\r\n          e.changedTouches[0].clientY - scoreIncrementIndicator.clientHeight / 2\r\n        }px`;\r\n        scoreIncrementIndicator.style.left = `${\r\n          e.changedTouches[0].clientX - scoreIncrementIndicator.clientWidth / 2\r\n        }px`;\r\n        setTimeout(() => {\r\n          const clockwise = Math.random() < 0.5 ? 1 : -1;\r\n          scoreIncrementIndicator.style.transform = `translateY(-${\r\n            100 + randomIntFromInterval(0, 50)\r\n          }%) scale(${1 + randomIntFromInterval(0, 50) / 100}) rotate(${\r\n            clockwise * Math.floor(Math.random() * 45)\r\n          }deg)`;\r\n          scoreIncrementIndicator.style.opacity = \"0\";\r\n        }, 0);\r\n\r\n        const friesIncrementIndicator = document.createElement(\"img\");\r\n        friesIncrementIndicator.src =\r\n          \"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png\";\r\n        friesIncrementIndicator.className = \"friesIncrementIndicator\";\r\n        gameWrapper.current.append(friesIncrementIndicator);\r\n\r\n        animateElementInArc(\r\n          friesIncrementIndicator,\r\n          e.changedTouches[0].clientX - scoreIncrementIndicator.clientWidth / 2,\r\n          e.changedTouches[0].clientY -\r\n            scoreIncrementIndicator.clientHeight / 2,\r\n          staticFriesImg.getBoundingClientRect().left,\r\n          staticFriesImg.getBoundingClientRect().top,\r\n          1000\r\n        );\r\n\r\n        friesIncrementIndicator.onanimationend = (e) => {\r\n          if (e.animationName === \"friesIncrementIndicatorPulse\") {\r\n            gameWrapper.current.removeChild(friesIncrementIndicator);\r\n            gameWrapper.current.removeChild(scoreIncrementIndicator);\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n    function animateElementInArc(\r\n      element,\r\n      startX,\r\n      startY,\r\n      endX,\r\n      endY,\r\n      duration\r\n    ) {\r\n      const controlX = randomIntFromInterval(0, window.innerWidth);\r\n      const controlY = randomIntFromInterval(startY, endY);\r\n\r\n      const startTime = Date.now();\r\n\r\n      function animate() {\r\n        const currentTime = Date.now();\r\n        const elapsedTime = currentTime - startTime;\r\n        const progress = Math.min(elapsedTime / duration, 1);\r\n\r\n        const currentX = quadraticBezier(startX, controlX, endX, progress);\r\n        const currentY = quadraticBezier(startY, controlY, endY, progress);\r\n\r\n        element.style.top = currentY + \"px\";\r\n        element.style.left = currentX + \"px\";\r\n\r\n        if (progress < 1) {\r\n          requestAnimationFrame(animate);\r\n        }\r\n      }\r\n\r\n      function quadraticBezier(start, control, end, t) {\r\n        return (\r\n          Math.pow(1 - t, 2) * start +\r\n          2 * (1 - t) * t * control +\r\n          Math.pow(t, 2) * end\r\n        );\r\n      }\r\n\r\n      animate();\r\n    }\r\n\r\n    function step(timeStamp) {\r\n      if (start === undefined) {\r\n        start = timeStamp;\r\n      }\r\n      const elapsed = timeStamp - start;\r\n      const potatoRows = gameWrapper.current.querySelectorAll(\".potatoRow\");\r\n\r\n      if (potatoRows[potatoRows.length - 1].offsetTop > 0) {\r\n        generatePotatoes(elapsed);\r\n      }\r\n\r\n      if (speed < 0.3) {\r\n        speed = 0.1 + elapsed / 100000;\r\n      }\r\n\r\n      if (potatoRows[0].offsetTop > window.innerHeight) {\r\n        gameWrapper.current.removeChild(potatoRows[0]);\r\n      }\r\n\r\n      potatoRows.forEach((el) => {\r\n        el.style.bottom = `${\r\n          window.innerHeight - (elapsed - el.dataset.elapsedTime) * speed\r\n        }px`;\r\n      });\r\n\r\n      requestAnimationFrame(step);\r\n    }\r\n\r\n    generatePotatoes(0);\r\n    requestAnimationFrame(step);\r\n  }, [setScore]);\r\n\r\n  return (\r\n    <div className=\"potatoGame\" ref={gameWrapper}>\r\n      <div className=\"score\">\r\n        <img src=\"https://devlak2001.s3.eu-central-1.amazonaws.com/potatoPeeler/fries.png\" />\r\n        <div className=\"digitsWrapper\">\r\n          <div\r\n            className=\"digits\"\r\n            style={{\r\n              transform: `translateY(calc(-${Number(score[0])} * 11.4vw))`,\r\n            }}\r\n          >\r\n            <div>\r\n              <span>0</span>\r\n            </div>\r\n            <div>\r\n              <span>1</span>\r\n            </div>\r\n            <div>\r\n              <span>2</span>\r\n            </div>\r\n            <div>\r\n              <span>3</span>\r\n            </div>\r\n            <div>\r\n              <span>4</span>\r\n            </div>\r\n            <div>\r\n              <span>5</span>\r\n            </div>\r\n            <div>\r\n              <span>6</span>\r\n            </div>\r\n            <div>\r\n              <span>7</span>\r\n            </div>\r\n            <div>\r\n              <span>8</span>\r\n            </div>\r\n            <div>\r\n              <span>9</span>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"digits\"\r\n            style={{\r\n              transform: `translateY(calc(-${Number(score[1])} * 11.4vw))`,\r\n            }}\r\n          >\r\n            <div>\r\n              <span>0</span>\r\n            </div>\r\n            <div>\r\n              <span>1</span>\r\n            </div>\r\n            <div>\r\n              <span>2</span>\r\n            </div>\r\n            <div>\r\n              <span>3</span>\r\n            </div>\r\n            <div>\r\n              <span>4</span>\r\n            </div>\r\n            <div>\r\n              <span>5</span>\r\n            </div>\r\n            <div>\r\n              <span>6</span>\r\n            </div>\r\n            <div>\r\n              <span>7</span>\r\n            </div>\r\n            <div>\r\n              <span>8</span>\r\n            </div>\r\n            <div>\r\n              <span>9</span>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"digits\"\r\n            style={{\r\n              transform: `translateY(calc(-${Number(score[2])} * 11.4vw))`,\r\n            }}\r\n          >\r\n            <div>\r\n              <span>0</span>\r\n            </div>\r\n            <div>\r\n              <span>1</span>\r\n            </div>\r\n            <div>\r\n              <span>2</span>\r\n            </div>\r\n            <div>\r\n              <span>3</span>\r\n            </div>\r\n            <div>\r\n              <span>4</span>\r\n            </div>\r\n            <div>\r\n              <span>5</span>\r\n            </div>\r\n            <div>\r\n              <span>6</span>\r\n            </div>\r\n            <div>\r\n              <span>7</span>\r\n            </div>\r\n            <div>\r\n              <span>8</span>\r\n            </div>\r\n            <div>\r\n              <span>9</span>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"digits\"\r\n            style={{\r\n              transform: `translateY(calc(-${Number(score[3])} * 11.4vw))`,\r\n            }}\r\n          >\r\n            <div>\r\n              <span>0</span>\r\n            </div>\r\n            <div>\r\n              <span>1</span>\r\n            </div>\r\n            <div>\r\n              <span>2</span>\r\n            </div>\r\n            <div>\r\n              <span>3</span>\r\n            </div>\r\n            <div>\r\n              <span>4</span>\r\n            </div>\r\n            <div>\r\n              <span>5</span>\r\n            </div>\r\n            <div>\r\n              <span>6</span>\r\n            </div>\r\n            <div>\r\n              <span>7</span>\r\n            </div>\r\n            <div>\r\n              <span>8</span>\r\n            </div>\r\n            <div>\r\n              <span>9</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"peelers\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IndexPage;\r\n\r\nexport const Head = () => (\r\n  <>\r\n    <meta\r\n      name=\"viewport\"\r\n      content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"\r\n    />\r\n    <title>Home Page</title>\r\n  </>\r\n);\r\n"],"names":["gameWrapper","useRef","score","setScore","useState","useEffect","start","maxPotatoes","staticFriesImg","current","querySelector","peelers","querySelectorAll","console","log","peelersOffsetTop","offsetTop","peelersHeight","clientHeight","speed","randomIntFromInterval","min","max","Math","floor","random","generatePotatoes","elapsedTime","potatoRow","document","createElement","dataset","toString","className","style","bottom","window","innerHeight","numPotatoes","columns","i","randomIndex","length","potato","src","gridColumn","peelable","column","ontouchstart","potatoOnTouchStart","append","splice","e","currentTarget","getBoundingClientRect","top","classList","add","Number","padStart","parseInt","animation","scoreIncrementIndicator","textContent","changedTouches","clientY","left","clientX","clientWidth","setTimeout","clockwise","transform","opacity","friesIncrementIndicator","element","startX","startY","endX","endY","duration","controlX","innerWidth","controlY","startTime","Date","now","animate","progress","currentX","quadraticBezier","currentY","requestAnimationFrame","control","end","t","pow","animateElementInArc","onanimationend","animationName","removeChild","addEventListener","preventDefault","step","timeStamp","undefined","elapsed","potatoRows","forEach","el","ref","Head","name","content"],"sourceRoot":""}